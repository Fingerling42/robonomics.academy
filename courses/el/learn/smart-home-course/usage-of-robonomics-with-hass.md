---
title: "Μάθημα #7, Χρήση του Robonomics με το Home Assistant"
lastUpdate: Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)
description: μάθημα βοηθού σπιτιού
lessonNumber: 8
metaOptions: [Μάθετε, Κυρίαρχο Έξυπνο Σπίτι με το Robonomics και το Home Assistant]
defaultName: Sovereign Smart Home with Robonomics and Home Assistant
---

## Τι είναι αυτό

Σε αυτό το μάθημα, θα δοκιμάσετε να χρησιμοποιήσετε τις κύριες υπηρεσίες Robonomics IoT. Η πρώτη μπορεί να ερωτήσει την τηλεμετρία των έξυπνων συσκευών στο σπίτι, επιτρέποντάς σας να λαμβάνετε απομακρυσμένα δεδομένα από το Home Assistant. Η δεύτερη υπηρεσία δημιουργεί αντίγραφα ασφαλείας της διαμόρφωσης του Home Assistant και την ανακτά όταν απαιτείται (για παράδειγμα, σε περίπτωση αποτυχίας των καρτών SD).


## Σχετικά με τις λειτουργίες parachain

Στη συνέχεια θα δείτε πώς χρησιμοποιούνται οι λειτουργίες του Robonomics parachain για να παρέχουν στον χρήστη του Home Assistant την απαραίτητη υπηρεσία. 

Η λήψη τηλεμετρίας βασίζεται στο παλέτο <code>datalog</code> που γνωρίζετε ήδη. Κάθε συγκεκριμένο χρονικό διάστημα (αλλά όχι λιγότερο από όσο επιτρέπει το συσσωρευμένο βάρος), μια συναλλαγή <code>datalog.record()</code> στέλνεται στο parachain από τη διεύθυνση <code>SUB_CONTROLLER</code> με το hash του αρχείου που έχει κρυπτογραφηθεί, όπου συλλέγονται όλα τα δεδομένα των συσκευών IoT σας. Πράγματι, για να λάβετε τηλεμετρία, ζητάτε τα απαραίτητα datalogs από το parachain που σχετίζονται με τη συνδρομή σας στο IoT και στη συνέχεια τα αποκρυπτογραφείτε με τα κλειδιά σας.

Για τη δημιουργία αντιγράφου ασφαλείας, χρησιμοποιείται ένα άλλο παλέτο Robonomics που ονομάζεται <code>digitalTwin</code>, το οποίο είναι μια υλοποίηση της ιδέας ενός ψηφιακού διδύμου, μια ψηφιακή έκδοση πραγματικού εξοπλισμού που αντιγράφει τα τεχνικά του χαρακτηριστικά και τα ιστορικά δεδομένα του. Αρχικά, δημιουργείται ένα μοναδικό ID για το ψηφιακό δίδυμο του Home Assistant σας χρησιμοποιώντας το <code>digitalTwin.create()</code> extrinsic. Στη συνέχεια, χρησιμοποιώντας το <code>digitalTwin.setSource()</code> extrinsic, αυτό το ID συνδέεται με ορισμένα δεδομένα (το πεδίο <code>topic</code>) και με μια διεύθυνση στο parachain (το πεδίο <code>source</code>). Για το αντίγραφο ασφαλείας του Home Assistant, το hash του αρχείου αντιγράφου ασφαλείας αποθηκεύεται στο πεδίο <code>topic</code>, και η διεύθυνση <code>SUB_OWNER</code> αποθηκεύεται στο πεδίο <code>source</code>.

## Οδηγίες

<List type="numbers">

<li>

Λήψη Τηλεμετρίας

<List>


<li>

Πηγαίνετε στην εφαρμογή και επιλέξτε την υπηρεσία [SmartHome Telemetry](https://dapp.robonomics.network/#/smarthome-telemetry).

<LessonVideo  :videos="[{src: 'https://crustipfs.info/ipfs/Qmao9RoWcKo2qs4PAGtm5gqHzyAHJcpDqNLgciU35FJeVm', type:'mp4'}]" />

</li>

<li>

Στο πεδίο <code>CONTROLLER</code> εισάγετε τη διεύθυνση <code>SUB_CONTROLLER</code>. Εισαγάγετε τον φράση κλειί για να κρυπτογραφήσετε τα δεδομένα.

</li>

<li>

Στο τμήμα <code>Λήψη τηλεμετρίας</code> επιλέξτε ένα χρονικό σημείο από τη λίστα αναπτυσσόμενων και πατήστε το κουμπί <code>ΛΗΨΗ ΤΗΛΕΜΕΤΡΙΑΣ</code>.


Η λήψη τηλεμετρίας μπορεί να πάρει κάποιο χρόνο. Αφού ολοκληρωθεί, θα δείτε τις πληροφορίες από τους αισθητήρες σας.

</li>
</List>
</li>


<li>

Δημιουργία Αντιγράφου Ασφαλείας

<List>

<li>

Για τη δημιουργία αντιγράφων ασφαλείας, καλείται μια υπηρεσία που δημιουργεί ένα ασφαλές αρχείο με τα αρχεία διαμόρφωσης. Αυτή η υπηρεσία στη συνέχεια προσθέτει το αρχείο στο IPFS και αποθηκεύει το αποτέλεσμα CID στο Robonomics Digital Twin.

<robo-academy-note type="warning" title="WARNING">
Για να ανακτήσετε τη διαμόρφωσή σας, είναι απαραίτητο να χρησιμοποιήσετε έναν προσαρμοσμένο πύλη IPFS όπως το Pinata (pinata.cloud) ή το Crust Network (crust.network). Χωρίς αυτό, το αντίγραφο ασφαλείας ας θα αποθηκευτεί αποκλειστικά στον τοπικό κόμβο IPFS σας, πράγμα που μπορεί να σας εμποδίσει από την ανάκτηση της διαμόρφωσης του Home Assistant σας σε περίπτωση αποτυχίας του τοπικού κόμβου. 
</robo-academy-note>

<LessonVideo  :videos="[{src: 'https://crustipfs.info/ipfs/QmVo91dLaAYgFDM1vrL2PYfAffM6SGGC59ZERbfHR44tqW', type:'mp4'}]" />

</li>

<li>

Στη διαδικτυακή διεπαφή του Home Assistant πηγαίνετε στο <code>Εργαλεία Προγραμματιστή</code> -> <code>Υπηρεσίες</code>. Αναζητήστε το <code>Robonomics: Αποθήκευση Αντιγράφου Ασφαλείας στο Robonomics</code> και πατήστε <code>ΚΛΗΣΗ ΥΠΗΡΕΣΙΑΣ</code>.

</li>

<li>

Περιμένετε μέχρι να εμφανιστεί η ειδοποίηση <code>Το Αντίγραφο Ασφαλείας ενημερώθηκε στο Robonomics</code> στην <code>Ειδοποίηση</code>.

</li>

<li>

Για να αποκαταστήσετε τη διαμόρφωσή σας, θα πρέπει να εγκαταστήσετε μια νέα και καθαρή εγκατάσταση του Home Assistant (και να επαναλάβετε όλα τα προηγούμενα βήματα) με την ενσωμάτωση Robonomics Home Assistant χρησιμοποιώντας τα ίδια seeds που δημιουργήσατε προηγουμένως. Θα πρέπει επίσης να δημιουργήσετε έναν μεσίτη MQTT με το ίδιο όνομα χρήστη και κωδικό πρόσβασης.

<robo-academy-note type="warning" title="WARNING">
Δεδομένου ότι μερικές συσκευές που συνδέονται στο Home Assistant μέσω Wi-Fi ή MQTT απαιτούν από εσάς να καθορίσετε ρητά την τοπική διεύθυνση IP του Raspberry Pi σας, κατά την αποκατάσταση ενός αντιγράφου ασφαλείας, ενδέχεται να μην είναι διαθέσιμες λόγω αλλαγής σε αυτή τη διεύθυνση IP. Θα πρέπει να εισαγάγετε ξανά τη νέα διεύθυνση IP στις ρυθμίσεις αυτών των συσκευών. Για να αποφύγετε αυτό, μπορείτε να ρυθμίσετε μια στατική τοπική διεύθυνση IP για το Raspberry Pi σας στις ρυθμίσεις του δρομολογητή σας (εάν υποστηρίζει αυτή τη δυνατότητα).
</robo-academy-note>

<LessonVideo  :videos="[{src: 'https://crustipfs.info/ipfs/QmWmnmkXUcPXsAnQzwN3UEuki2GMYnQDx3vhgjEypCU8aR', type:'mp4'}]" />


</li>

<li>

Στη διαδικτυακή διεπαφή του Home Assistant πηγαίνετε στο <code>Εργαλεία Προγραμματιστή</code> -> <code>Υπηρεσίες</code>. Αναζητήστε το <code>Robonomics: Αποκατάσταση από το Αντίγραφο Ασφαλείας στο Robonomics</code> και πατήστε <code>ΚΛΗΣΗ ΥΠΗΡΕΣΙΑΣ</code>. Πλοηγηθείτε στη σελίδα <code>Επισκόπηση</code> για να ελέγξετε την κατάσταση του αντιγράφου ασφαλείας σας.

</li>

<li>

Μόλις το Home Assistant ολοκληρώσει την επανεκκίνηση, η διαμόρφωσή σας θα αποκατασταθεί. Εάν η κατάσταση αλλάξει σε <code>αποκαταστάθηκε</code> αλλά το Home Assistant δεν επανεκκινεί αυτόματα, θα πρέπει να το επανεκκινήσετε χειροκίνητα πηγαίνοντας στις <code>Ρυθμίσεις</code> > <code>Σύστημα</code> και κάνοντας κλικ στο κουμπί <code>ΕΠΑΝΕΚΚΙΝΗΣΗ</code> στην επάνω δεξιά γωνία.

</li>

</List>
</li>

</List>

## Ολοκλήρωση Μαθήματος

<List>

<li class="flex"> 

Συγχαρητήρια! Ολοκληρώσατε με επιτυχία την πλήρη εγκατάσταση και αναπτυξη του κυρίαρχου έξυπνου σπιτιού σας. Μπορείτε τώρα να ζητήσετε ένα πιστοποιητικό ολοκλήρωσης μαθήματος από εμάς επισκεπτόμενοι το κανάλι μας στο Discord. Γράψτε μας στη συζήτηση [robonomics-academy](https://discord.com/channels/803947358492557312/803947358492557315) και ένας εκπρόσωπός μας θα επικοινωνήσει μαζί σας.
</li>

<li class="flex">

Η απόδειξη ολοκλήρωσης μαθήματος είναι αντίστοιχες συναλλαγές που μπορούν να επαληθευτούν στον [Εξερευνητή Polkadot](https://robonomics.subscan.io/). Αυτές είναι συναλλαγές σχετικά με την αγορά μιας συνδρομής, την προσθήκη μιας συσκευής σε μια συνδρομή και την αποστολή αρχείων δεδομένων από συσκευές.

</li>

</List>